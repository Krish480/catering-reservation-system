<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MealMatrix - Menu</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">
  <%- include("../partials/header") %>

  <!-- Menu Section -->
  <section class="container mx-auto py-16 px-6">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-10">Our Menu</h2>
    <div id="menu-container" class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
      <!-- Items dynamically injected from JSON -->
    </div>
  </section>

  <%- include("../partials/footer") %>

  <script>
    async function loadMenu() {
      const menuContainer = document.getElementById("menu-container");
      menuContainer.innerHTML = "<p class='text-center col-span-3'>Loading menu...</p>";

      try {
        const response = await fetch("/data/menu.json");
        const menuItems = await response.json();
        
        menuContainer.innerHTML = ""; // Clear loading text
        menuItems.forEach(item => {
          menuContainer.innerHTML += `
            <div class="bg-white p-6 shadow-md rounded-xl hover:shadow-xl transition">
              <img src="${item.imageUrl}" alt="${item.name}" class="w-full object-cover rounded-md drop-shadow-[0_10px_15px_rgba(0,0,0,0.4)] mx-auto">
              <h3 class="mt-4 text-xl font-semibold text-gray-800">${item.name}</h3>
              <p class="text-gray-600">â‚¹${item.price}</p>
              <button class="mt-4 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700">Add to Cart</button>
            </div>
          `;
        });
      } catch (error) {
        menuContainer.innerHTML = "<p class='text-red-500'>Failed to load menu data.</p>";
        console.error("Error loading menu:", error);
      }
    }

    // Load menu on page load
    window.onload = loadMenu;
  </script>
</body>
</html>
